<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>User Profile Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
body { font-family: 'Poppins', sans-serif; background: linear-gradient(to bottom right, #eef2ff, #faf5ff);}
.tab-active { background: linear-gradient(to right, #3b82f6, #8b5cf6); color: white; transform: scale(1.08); box-shadow: 0 4px 10px rgba(99, 102, 241, 0.4);}
.fade-in { animation: fadeIn 0.7s ease-in-out;}
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
</style>
</head>
<body class="min-h-screen">

<!-- HEADER -->
<header class="bg-white sticky top-0 z-50 shadow-sm border-b border-gray-100">
  <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
    <h1 class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">Profile Dashboard</h1>
    <nav class="flex gap-3">
      <button class="px-5 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition" onclick="showTab('edit')">âœï¸ Edit Profile</button>
      <button class="px-5 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition" onclick="showTab('settings')">âš™ï¸ Settings</button>
      <a href="{% url 'logout' %}" class="px-5 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition">ğŸšª Logout</a>
    </nav>
  </div>
</header>

<!-- PROFILE CARD -->
<section class="max-w-7xl mx-auto mt-10 bg-white rounded-2xl shadow-xl border p-10 fade-in">
  <div class="flex flex-col lg:flex-row items-center lg:items-start lg:justify-between gap-8">
    <div class="flex flex-col items-center text-center lg:text-left">
      <img src="https://i.pravatar.cc/150?img=32" alt="Profile" class="rounded-full w-32 h-32 border-4 border-blue-400 shadow-md mb-4">
      <h2 class="text-3xl font-bold text-gray-900 mb-1">{{ user.username }}</h2>
      <p class="text-blue-600 font-medium mb-3">@{{ user.username }}</p>
      <p class="text-gray-600 max-w-md mb-4">{{ profile.about|default:"No bio available." }}</p>
      <p class="text-gray-500">ğŸ“ {{ profile.address|default:"Unknown" }}</p>
    </div>
    <!-- Contact Section -->
    <div class="bg-gray-50 p-6 rounded-xl shadow-inner w-full lg:w-1/3">
      <h3 class="text-xl font-semibold mb-4 text-gray-800">ğŸ“ Contact & Socials</h3>
      <p class="text-gray-600 mb-2">ğŸ“§ {{ user.email }}</p>
      <p class="text-gray-600 mb-2">ğŸ“± {{ profile.phone|default:"Not added" }}</p>
    </div>
  </div>
</section>

<!-- NAVIGATION TABS -->
<div class="max-w-7xl mx-auto mt-8 bg-white rounded-xl shadow-md p-2 border flex justify-center space-x-3 fade-in">
  <button class="tab-button px-6 py-3 font-medium rounded-lg tab-active" data-tab="overview" onclick="showTab('overview')">Overview</button>
  <button class="tab-button px-6 py-3 font-medium rounded-lg" data-tab="edit" onclick="showTab('edit')">Edit Profile</button>
  <button class="tab-button px-6 py-3 font-medium rounded-lg" data-tab="settings" onclick="showTab('settings')">Settings</button>
  <button class="tab-button px-6 py-3 font-medium rounded-lg" data-tab="dare" onclick="showTab('dare')">Dare</button>
</div>

<!-- TAB CONTENT -->
<section class="max-w-7xl mx-auto mt-8">

  <!-- OVERVIEW TAB -->
  <div id="tab-overview" class="tab-content fade-in">
    <div class="bg-white rounded-2xl shadow-lg p-8 border">
      <h2 class="text-2xl font-bold mb-4 text-gray-900">ğŸ§¾ About Me</h2>
      <p class="text-gray-600 leading-relaxed">
        {{ profile.about|default:"You havenâ€™t added any personal description yet." }}
      </p>
    </div>
  </div>

  <!-- EDIT PROFILE TAB -->

<!-- EDIT PROFILE TAB -->
<div id="tab-edit" class="tab-content hidden fade-in">
  <div class="bg-white rounded-2xl shadow-lg p-8 border">
    <h2 class="text-2xl font-bold mb-6 text-gray-900">âœï¸ Edit Your Profile</h2>
    <form method="POST">
      {% csrf_token %}
      <input type="text" name="username" value="{{ user.username }}" placeholder="Username" required class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500">
      <input type="email" name="email" value="{{ user.email }}" placeholder="Email" required class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500">
      <input type="text" name="phone" value="{{ profile.phone }}" placeholder="Phone" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500">
      <input type="text" name="address" value="{{ profile.address }}" placeholder="Address" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500">
      <textarea name="about" placeholder="About You" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500">{{ profile.about }}</textarea>
      <input type="password" name="password" placeholder="Change Password (optional)" class="w-full p-3 mb-4 border rounded-lg focus:ring-2 focus:ring-blue-500">
      <button type="submit" class="px-6 py-3 mt-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">ğŸ’¾ Save Changes</button>
    </form>
    {% if messages %}
      {% for message in messages %}
        <p class="mt-4 text-green-600">{{ message }}</p>
      {% endfor %}
    {% endif %}
  </div>
</div>


  <!-- SETTINGS TAB (Password change only shows here!) -->
  <div id="tab-settings" class="tab-content hidden fade-in">
    <div class="bg-white rounded-2xl shadow-lg p-8 border">
      <h2 class="text-2xl font-bold mb-6 text-gray-900">âš™ï¸ Settings</h2>
      <form method="POST" action="{% url 'profile' %}">
        {% csrf_token %}
        <input 
          type="password" 
          name="password" 
          placeholder="Change Password (optional)" 
          class="w-full p-3 mb-4 border rounded-lg focus:ring-2 focus:ring-blue-500"
        >
        <button 
          type="submit"
          class="w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium rounded-lg shadow-md hover:from-blue-700 hover:to-purple-700 transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-400"
        >
          ğŸ’¾ Change Password
        </button>
      </form>
    </div>
  </div>

  <!-- DARE TAB (if needed) -->
  <div id="tab-dare" class="tab-content hidden fade-in">
    <div class="bg-white rounded-2xl shadow-lg p-8 border">
      <h2 class="text-2xl font-bold mb-6 text-gray-900">â­ Dare</h2>
      <!-- Dare content here -->
    </div>
  </div>

</section>

<!-- FOOTER -->
<footer class="text-center text-gray-500 mt-12 mb-8">Last updated: <span id="date"></span></footer>

<script>
document.getElementById('date').textContent = new Date().toLocaleDateString();

function showTab(tab) {
  const buttons = document.querySelectorAll('.tab-button');
  const contents = document.querySelectorAll('.tab-content');
  buttons.forEach(t => {
    if (t.dataset.tab === tab) t.classList.add('tab-active');
    else t.classList.remove('tab-active');
  });
  contents.forEach(c => c.classList.add('hidden'));
  document.getElementById('tab-' + tab).classList.remove('hidden');
}
// Default show overview on page load
showTab('overview');
</script>

</body>
</html>
